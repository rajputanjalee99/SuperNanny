<aside>
  <app-sidebar></app-sidebar>
</aside>
<main class="main-content position-relative max-height-vh-100 h-100 mt-1 border-radius-lg ps ps--active-y">
  <app-header [data]="title"></app-header>
  <!-- Navbar -->
  <!-- End Navbar -->
  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-xl-4 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-capitalize font-weight-bold">Today's Money</p>
                  <h5 class="font-weight-bolder mb-0">
                    ₹{{fixNumber(earing_data?.todayEarning?.totalAmount) ?
                    fixNumber(earing_data?.todayEarning?.totalAmount) : 0}}
                    <span class="text-success text-sm font-weight-bolder"></span>
                  </h5>
                </div>
              </div>
              <div class="col-4 text-end">
                <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                  <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-4 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-capitalize font-weight-bold">Today's Services</p>
                  <h5 class="font-weight-bolder mb-0">
                    {{earing_data?.todayBookings ?
                    earing_data?.todayBookings : 0}}
                    <span class="text-success text-sm font-weight-bolder"></span>
                  </h5>
                </div>
              </div>
              <div class="col-4 text-end">
                <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                  <i class="ni ni-world text-lg opacity-10" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-capitalize font-weight-bold">New Clients</p>
                  <h5 class="font-weight-bolder mb-0">
                    +3,462
                    <span class="text-danger text-sm font-weight-bolder">-2%</span>
                  </h5>
                </div>
              </div>
              <div class="col-4 text-end">
                <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                  <i class="ni ni-paper-diploma text-lg opacity-10" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div> -->
      <div class="col-xl-4 col-sm-6">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-capitalize font-weight-bold">Total Earnings</p>
                  <h5 class="font-weight-bolder mb-0">
                    ₹{{fixNumber(earing_data?.totalEarning) ?
                    fixNumber(earing_data?.totalEarning) : 0}}
                    <span class="text-success text-sm font-weight-bolder"></span>
                  </h5>
                </div>
              </div>
              <div class="col-4 text-end">
                <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                  <i class="ni ni-cart text-lg opacity-10" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid my-4">
    <h5>My Nanny</h5>
  </div>
  <div class="container-fluid my-4">
    <div class="row">
      <div class="col-sm-4 mt-3" *ngFor="let item of nannies">
        <div class="card">
          <div class="card-body">
            <div class="nanny-body">
              <div class="nanny-header">
                <div class="nanny-images">
                  <div class="nanny-live-dtl">
                    <img src="{{this.url+item?.nannyInfo?.take_photo}}" alt="Nanny Profile Image"
                      (error)="onImgError($event)">
                    <div *ngIf="item?.isNannyLive">
                      <div class="center">
                        <div class="pulse">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="nanny-username">
                    <h6 class="m-0">{{ item?.nanny_data?.name }}</h6>
                    <div class="rating-star" *ngIf="item?.nannyInfo?.avg_rating !=0">
                      <!-- <i class="fa fa-star" aria-hidden="true" *ngFor="let x of getRating(item?.nannyInfo?.avg_rating)">{{x}}</i> -->
                      <i *ngIf="getRating(item?.nannyInfo?.avg_rating)==1 || getRating(item?.nannyInfo?.avg_rating)==2 || getRating(item?.nannyInfo?.avg_rating)==3 || getRating(item?.nannyInfo?.avg_rating)==4 || getRating(item?.nannyInfo?.avg_rating)==5"
                        class="fa fa-star" aria-hidden="true"></i>
                      <i *ngIf="getRating(item?.nannyInfo?.avg_rating)==2 || getRating(item?.nannyInfo?.avg_rating)==3 || getRating(item?.nannyInfo?.avg_rating)==4 || getRating(item?.nannyInfo?.avg_rating)==5"
                        class="fa fa-star" aria-hidden="true"></i>
                      <i *ngIf="getRating(item?.nannyInfo?.avg_rating)==3 || getRating(item?.nannyInfo?.avg_rating)==4"
                        class="fa fa-star" aria-hidden="true"></i>
                      <i *ngIf="getRating(item?.nannyInfo?.avg_rating)==4 || getRating(item?.nannyInfo?.avg_rating)==5"
                        class="fa fa-star" aria-hidden="true"></i>
                      <i *ngIf="getRating(item?.nannyInfo?.avg_rating)==5" class="fa fa-star" aria-hidden="true"></i>
                    </div>
                    <div class="rating-star" *ngIf="item?.nannyInfo?.avg_rating ==0">
                      <p>No Rating</p>

                    </div>
                  </div>
                </div>
                <div>
                  <ul>
                    <li class="nav-item pe-2 d-flex align-items-center">
                      <a href="javascript:;" class="nav-link text-body p-0" id="dropdownMenuButton"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa fa-ellipsis-v cursor-pointer"></i>
                      </a>
                      <ul class="dropdown-menu  dropdown-menu-end  px-2 py-3 me-sm-n4"
                        aria-labelledby="dropdownMenuButton">
                        <li class="mb-2">
                          <a class="dropdown-item border-radius-md" href="javascript:;">
                            <div class="d-flex flex-column justify-content-center">
                              <h6 class="text-sm font-weight-normal mb-1"
                                routerLink="/user/nanny-profile/{{item.nanny_id}}">
                                <span class="font-weight-bold">View Profile</span>
                              </h6>
                            </div>
                          </a>
                        </li>
                        <!-- <li class="mb-2">
                          <a class="dropdown-item border-radius-md" href="javascript:;">
                            <div class="d-flex flex-column justify-content-center">
                              <h6 class="text-sm font-weight-normal mb-1">
                                <span class="font-weight-bold">Watch Live</span>
                              </h6>
                            </div>
                          </a>
                        </li> -->
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="nanny-body">
                <div class="nn-ctgry-detl">
                  <div class="nn-ctgry">
                    <p>Status</p>
                  </div>
                  <div class="nn-sub-ctgry">
                    <p class="text-success">{{ item?.nanny_data?.status }}</p>
                  </div>
                </div>
                <div class="nanny-about">
                  <!-- <h6 class="m-0">About</h6> -->
                  <p>{{ item?.nanny_data?.about }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="no-nannies text-center" *ngIf="nannies.length == 0">

        No Nanny Found

      </div>

    </div>
  </div>
  <div class="container-fluid my-4">
    <h5>My Appointments For Bookings</h5>

    <div class="row justify-content-end">
      <div class="col-xl-4">
        <input type="text" class="form-control" placeholder="search"
        [(ngModel)]="serviceSearch" (ngModelChange)="searchServices()" aria-label="Search"
        value="">
      </div>
    </div>
  </div>
  <div class="container-fluid mb-5 mt-3">
    <div class="row">

      <div class="col-xl-12">
        <div class="card">
          <div class="card-body p-1">
            <div class="table-responsive">
              <table class="table text-center align-items-center mb-0">
                <thead>
                  <tr>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Sr. No.</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Start Date</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">End Date</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Booking Type</th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Time
                    </th>
                    
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Parent
                      Name
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nanny Name
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let x of  this.bookingList;let i=index">
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{i+1}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{x?.booking_slots[0]?.booking_start_date ? (x?.booking_slots[0]?.booking_start_date| date) : ''}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{x?.booking_type == 'one_time' ?  (x?.booking_slots[0]?.booking_expire_date | date): (x?.booking_slots[x?.booking_slots.length-1]?.booking_expire_date | date)}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{x?.booking_type}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{x?.booking_slots[0]?.booking_start_time ?  (x?.booking_slots[0]?.booking_start_time  |
                        timeFormate) : ''}}</span>
                    </td>
                    <!-- <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">06:20 PM</span>
                    </td> -->
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{x?.UserDetails?.name}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{x?.nanny_data?.name }} </span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold text-success">{{x?.nanny_status}}</span>
                    </td>
                  </tr>


                </tbody>
              </table>
              <div *ngIf=" this.bookingList.length == 0" class="text-center m-2">
                <div>*No Data Found</div>
              </div>
              <mat-paginator [length]="totalRecord" [pageSize]="this.limit" [pageSizeOptions]="[5, 10, 25, 100]"
                (page)="paginationOptionChange($event)"></mat-paginator>
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid my-4">
    <h5>My Appointments For Interview</h5>

    <!-- <div class="row justify-content-end">
      <div class="col-xl-4">
        <input type="text" class="form-control" placeholder="search"
        [(ngModel)]="serviceSearch" (ngModelChange)="searchServices()" aria-label="Search"
        value="">
      </div>
    </div> -->
  </div>
  <div class="container-fluid mb-5 mt-3">
    <div class="row">

      <div class="col-xl-12">
        <div class="card">
          <div class="card-body p-1">
            <div class="table-responsive">
              <table class="table text-center align-items-center mb-0">
                <thead>
                  <tr>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Sr. No.</th>
                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Date</th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Time
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Parent
                      Name
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nanny
                      Name
                    </th>
                    <!-- <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nanny
                    </th> -->
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Action
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let data of  this.liveNanniesList;let i=index">
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{i+1}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{data?.date | date}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{data?.time |
                        timeFormate}}</span>
                    </td>
                    <!-- <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">06:20 PM</span>
                    </td> -->
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{data?.user_id?.name}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">{{data?.nanny_id?.name}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold text-success">{{data?.status}}</span>
                    </td>
                    <td class="align-middle text-center text-sm">
                      <span class="text-xs font-weight-bold">
                        <div  routerLink="/user/watch/full-screen-interview/{{data?._id === null ? 0 : data?._id}}/{{data?.room_id === null ? 0 : data?.room_id}}">
                          <i class="fas fa-eye"></i>
                      </div>
                      </span>
                    </td>
                  </tr>


                </tbody>
              </table>
              <div *ngIf="this.liveNanniesList.length == 0" class="text-center m-2">
                <div>*No Data Found</div>
              </div>
              <mat-paginator [length]="totalRecord1" [pageSize]="this.limit1" [pageSizeOptions]="[5, 10, 25, 100]"
                (page)="paginationOptionChange1($event)"></mat-paginator>
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>